<!DOCTYPE html>

<html lang="he">
<!-- Mirrored from forums.pythonic.guru/t/fastapi-testclient-middleware-problam/9052?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 17 Sep 2023 04:23:55 GMT -->
<!-- Added by HTTrack --><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8"/>
<title>Fastapi testclient middleware problam - שבוע 16 - פייתון בעברית ובחינם</title>
<meta content="היי לכולם! 
אני עובד על הפאנל פיצרים ומה שמצאתי שאני רוצה לעשות לתפוס את כל הבקשות HTTP ואם הבקשה מובילה לפיצר מכובה disabled הוא לא יתן להריץ אותו. 
(אם אני לא עושה את זה אני כנראה אצור פונקציה שמי שיש לו פיצר יצתרך כנר&amp;hellip;" name="description"/>
<meta content="Discourse 3.2.0.beta2-dev - https://github.com/discourse/discourse version ebe68e15fce9c2fc2c67628ce4a9b24284c09b80" name="generator"/>
<link href="../../uploads/default/optimized/1X/49c4c7d93c7e73a9a15013cfae1d89084c9ba521_2_32x32.jpg" rel="icon" type="image/png"/>
<link href="../../uploads/default/optimized/1X/49c4c7d93c7e73a9a15013cfae1d89084c9ba521_2_180x180.jpg" rel="apple-touch-icon" type="image/png"/>
<meta content="#ffffff" media="all" name="theme-color"/>
<meta content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover" name="viewport"/>
<link href="90524658.html?page=2" rel="canonical"/>
<link href="../../opensearch.xml" rel="search" title="פייתון בעברית ובחינם Search" type="application/opensearchdescription+xml"/>
<link class="light-scheme" href="../../stylesheets/color_definitions_scheme_2_3_4eaabccdb423ebdd5fde62bb8c929b7912b0ba33.css_%3b%20filename_%3dUTF-8%27%27color_definitions_scheme_2_3_4eaabccdb423ebdd5fde62bb8c929b7912b0ba337939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="desktop_rtl" href="../../stylesheets/desktop_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27desktop_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="checklist_rtl" href="../../stylesheets/checklist_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27checklist_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="discourse-cakeday_rtl" href="../../stylesheets/discourse-cakeday_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27discourse-cakeday_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="discourse-calendar_rtl" href="../../stylesheets/discourse-calendar_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27discourse-calendar_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="discourse-details_rtl" href="../../stylesheets/discourse-details_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27discourse-details_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="discourse-lazy-videos_rtl" href="../../stylesheets/discourse-lazy-videos_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27discourse-lazy-videos_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="discourse-local-dates_rtl" href="../../stylesheets/discourse-local-dates_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27discourse-local-dates_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="discourse-math_rtl" href="../../stylesheets/discourse-math_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27discourse-math_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="discourse-narrative-bot_rtl" href="../../stylesheets/discourse-narrative-bot_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27discourse-narrative-bot_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="discourse-presence_rtl" href="../../stylesheets/discourse-presence_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27discourse-presence_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="discourse-solved_rtl" href="../../stylesheets/discourse-solved_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27discourse-solved_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="discourse-tooltips_rtl" href="../../stylesheets/discourse-tooltips_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27discourse-tooltips_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="docker_manager_rtl" href="../../stylesheets/docker_manager_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27docker_manager_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="poll_rtl" href="../../stylesheets/poll_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27poll_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="discourse-calendar_desktop_rtl" href="../../stylesheets/discourse-calendar_desktop_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27discourse-calendar_desktop_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="poll_desktop_rtl" href="../../stylesheets/poll_desktop_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27poll_desktop_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="desktop_theme" data-theme-id="3" data-theme-name="בהיר" href="../../stylesheets/desktop_theme_3_32d9a33a83c213d82cb6da72bd3eb36192a74400.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_32d9a33a83c213d82cb6da72bd3eb36192a744007939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link href="9052.rss" rel="alternate nofollow" title="הזנת RSS של ‚Fastapi testclient middleware problam’" type="application/rss+xml"/>
<meta content="פייתון בעברית ובחינם" property="og:site_name"/>
<meta content="website" property="og:type"/>
<meta content="summary" name="twitter:card"/>
<meta content="../../uploads/default/original/2X/a/aff071b00abe0f768d83addcea242f555cef1181.png" name="twitter:image"/>
<meta content="../../uploads/default/original/2X/a/aff071b00abe0f768d83addcea242f555cef1181.png" property="og:image"/>
<meta content="90524658.html?page=2" property="og:url"/>
<meta content="90524658.html?page=2" name="twitter:url"/>
<meta content="Fastapi testclient middleware problam" property="og:title"/>
<meta content="Fastapi testclient middleware problam" name="twitter:title"/>
<meta content="תשמח לגלות  שהצלחתי להפעיל .ok  עם async-asgi-testclient.  אני אתן עכשיו דוגמא לאיך טסטים שמשתמשים בtestclient, לקחתי את הפונקציה test_end_to_end_testing מ- tests/test_whatsapp.py שבפרוייקט.  דוגמא לטסט תקול:  def test_end_to_end_testing(client):     resp = client.get('/whatsapp?phone_number=972536106106&amp;message=testing')     assert resp.ok     assert resp.json  דוגמא לטסט מתוקן:  @pytest.mark.asyncio async def test_end_to_end_testing(client):     resp = await client.get('/whatsapp?phone_number=..." property="og:description"/>
<meta content="תשמח לגלות  שהצלחתי להפעיל .ok  עם async-asgi-testclient.  אני אתן עכשיו דוגמא לאיך טסטים שמשתמשים בtestclient, לקחתי את הפונקציה test_end_to_end_testing מ- tests/test_whatsapp.py שבפרוייקט.  דוגמא לטסט תקול:  def test_end_to_end_testing(client):     resp = client.get('/whatsapp?phone_number=972536106106&amp;message=testing')     assert resp.ok     assert resp.json  דוגמא לטסט מתוקן:  @pytest.mark.asyncio async def test_end_to_end_testing(client):     resp = await client.get('/whatsapp?phone_number=..." name="twitter:description"/>
<meta content="הקורס הפתוח" property="og:article:section"/>
<meta content="0088CC" property="og:article:section:color"/>
<meta content="שבוע 16" property="og:article:section"/>
<meta content="0088CC" property="og:article:section:color"/>
<meta name="twitter:label1" value="זמן קריאה"/>
<meta name="twitter:data1" value="2 mins 🕑"/>
<meta name="twitter:label2" value="לייקים"/>
<meta name="twitter:data2" value="19 ❤"/>
<meta content="2021-02-10T13:17:34+00:00" property="article:published_time"/>
<meta content="true" property="og:ignore_canonical"/>
<link href="9052.html" rel="prev"/>
</head>
<body class="">
<header class="d-header">

<div class="wrap content">
<div class="title">
<a data-auto-route="true" href="/index.html">
<img alt="פייתון בעברית ובחינם" class="logo-big" id="site-logo" src="/uploads/default/original/1X/3c7e2ccc77e214fb4e38daa421f1b8878a5677f9.jpg"/>
</a>
<div class="before-header-panel-outlet"></div>
<div class="panel" role="navigation">
<span class="header-buttons"></span>
<ul class="icons d-header-icons">
<!-- More to come? -->
</ul>
</div>
</div>
</div></header>
<div class="wrap" id="main-outlet" role="main">
<div id="topic-title">
<h1>
<a href="9052.html">Fastapi testclient middleware problam</a>
</h1>
<div class="topic-category" itemscope="" itemtype="http://schema.org/BreadcrumbList">
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/old/20.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #0088CC"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">הקורס הפתוח</span>
</span>
</a>
<meta content="1" itemprop="position"/>
</span>
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/old/week-16/28.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #0088CC"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">שבוע 16</span>
</span>
</a>
<meta content="2" itemprop="position"/>
</span>
</div>
</div>
<div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
<meta content="Fastapi testclient middleware problam" itemprop="headline"/>
<meta content="שבוע 16" itemprop="articleSection"/>
<meta content="" itemprop="keywords"/>
<div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
<meta content="פייתון בעברית ובחינם" itemprop="name"/>
<div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject">
<meta content="../../uploads/default/original/1X/3c7e2ccc77e214fb4e38daa421f1b8878a5677f9.jpg" itemprop="url"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_21" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<span itemprop="name">Liran_C</span>
</span>
<link href="9052.html" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-02-10T13:17:34Z" itemprop="datePublished">
                     10 בפברואר,‏ 2021,‏  1:17pm
                  </time>
<meta content="2021-02-10T16:48:15Z" itemprop="dateModified"/>
</span>
</div>
<div class="post" itemprop="text">
<p>תשמח לגלות  שהצלחתי להפעיל <code>.ok</code>  עם async-asgi-testclient.</p>
<p>אני אתן עכשיו דוגמא לאיך טסטים שמשתמשים בtestclient, לקחתי את הפונקציה <code>test_end_to_end_testing</code> מ- tests/test_whatsapp.py שבפרוייקט.</p>
<p>דוגמא לטסט תקול:</p>
<pre><code>def test_end_to_end_testing(client):
    resp = client.get('/whatsapp?phone_number=972536106106&amp;message=testing')
    assert resp.ok
    assert resp.json
</code></pre>
<p>דוגמא לטסט מתוקן:</p>
<pre><code>@pytest.mark.asyncio
async def test_end_to_end_testing(client):
    resp = await client.get('/whatsapp?phone_number=972536106106&amp;message=testing')
    assert resp.ok
    assert resp.json()
</code></pre>
<p>אפשר לראות את ההבדלים בין הטסטים, חשוב שיהיה async await וחלק מהפעולות לוקחות סוגריים.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
<span class="post-likes">לייק 1</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_22" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<span itemprop="name">Yam</span>
</span>
<link href="9052.html" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-02-10T16:37:07Z" itemprop="datePublished">
                     10 בפברואר,‏ 2021,‏  4:37pm
                  </time>
<meta content="2021-02-10T16:37:07Z" itemprop="dateModified"/>
</span>
</div>
<div class="post" itemprop="text">
<p>מצוין, כיף לשמוע! (:</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
<span class="post-likes">לייק 1</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_23" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<span itemprop="name">Liran_C</span>
</span>
<link href="9052.html" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-02-16T12:03:46Z" itemprop="datePublished">
                     16 בפברואר,‏ 2021,‏ 12:03pm
                  </time>
<meta content="2021-02-16T12:03:46Z" itemprop="dateModified"/>
</span>
</div>
<div class="post" itemprop="text">
<p>טוב אז עשיתי PR לfeature panel  וכן הוא נכשל בגיטאב איך אני מתקדם מפה ? אני צריך לתקן את כל הטסטים כי זה נראלי הזוי לתקן הכל.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_24" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<span itemprop="name">yuval.cagan</span>
</span>
<link href="9052.html" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-02-16T13:16:54Z" itemprop="datePublished">
                     16 בפברואר,‏ 2021,‏  1:16pm
                  </time>
<meta content="2021-02-16T13:16:54Z" itemprop="dateModified"/>
</span>
</div>
<div class="post" itemprop="text">
<p>אם ביצעת שינוי בקוד שדורש שינוי בכל שאר הקבצים אתה חד משמעית צריך לתקן אותו בכל מקום, אחרת לא הוספת אלא פגעת ביכולות של המערכת.<br/>
אתה לא יכול לצפות מאנשים שפיצ’רים שלהם כבר מורג’ג’ו לחזור ולתקן קוד שהם כתבו שעבד ועבר את כל הבדיקות בגלל שהחלטת לשנות משהו לטובת הקוד שלך.<br/>
אם אתה רוצה שמשהו שעבדת עליו יתווסף למערכת, הוא חייב לעבוד עם כל שאר החלקים בה ולא להקריס אותה.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="4" itemprop="userInteractionCount"/>
<span class="post-likes">4 לייקים</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="1" itemprop="userInteractionCount"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_25" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<span itemprop="name">Liran_C</span>
</span>
<link href="9052.html" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-02-16T14:02:06Z" itemprop="datePublished">
                     16 בפברואר,‏ 2021,‏  2:02pm
                  </time>
<meta content="2021-02-16T14:02:06Z" itemprop="dateModified"/>
</span>
</div>
<div class="post" itemprop="text">
<p>תודה על התשובה! בהחלט אעשה כך.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="3" itemprop="userInteractionCount"/>
<span class="post-likes">3 לייקים</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
</div>
<div class="topic-body crawler-post" itemscope="" itemtype="http://schema.org/SiteNavigationElement" role="navigation">
<span itemprop="name"><a href="9052.html" itemprop="url" rel="prev">→ עמוד קודם</a></span>
</div>
</div>
<footer class="container wrap">
</footer>
<span class_="highlight-scripts"><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css" rel="stylesheet"/><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/go.min.js"></script><script>hljs.highlightAll();</script></span><span class_="highlight-scripts"><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css" rel="stylesheet"/><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/go.min.js"></script><script>hljs.highlightAll();</script></span></body>
<!-- Mirrored from forums.pythonic.guru/t/fastapi-testclient-middleware-problam/9052?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 17 Sep 2023 04:23:55 GMT -->
</html>
