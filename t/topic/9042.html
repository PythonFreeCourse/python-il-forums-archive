<!DOCTYPE html>

<html lang="he">
<!-- Mirrored from forums.pythonic.guru/t/topic/9042 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 17 Sep 2023 02:01:25 GMT -->
<!-- Added by HTTrack --><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8"/>
<title>על סגנון, 79 תווים בשורה, טכניקות לפיצול שורה וכיו"ב - שבוע 16 - פייתון בעברית ובחינם</title>
<meta content="שלום וברוכים הבאים לפינת ה&amp;quot;דברים מוזרים שחלק מהמתכנתים המוזרים האלו מתייחסים אליהם באורח כמעט דתי&amp;quot;. 
אם אין לכם כוח לקרוא הכל, קראו את ההקדמה בקטנה וקפצו רק לסעיף 3. 
והיום, רציתי לדבר על משהו שאני רואה בהרבה קומיטים ולא&amp;hellip;" name="description"/>
<meta content="Discourse 3.2.0.beta2-dev - https://github.com/discourse/discourse version ebe68e15fce9c2fc2c67628ce4a9b24284c09b80" name="generator"/>
<link href="../../uploads/default/optimized/1X/49c4c7d93c7e73a9a15013cfae1d89084c9ba521_2_32x32.jpg" rel="icon" type="image/png"/>
<link href="../../uploads/default/optimized/1X/49c4c7d93c7e73a9a15013cfae1d89084c9ba521_2_180x180.jpg" rel="apple-touch-icon" type="image/png"/>
<meta content="#ffffff" media="all" name="theme-color"/>
<meta content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover" name="viewport"/>
<link href="9042.html" rel="canonical"/>
<link href="../../opensearch.xml" rel="search" title="פייתון בעברית ובחינם Search" type="application/opensearchdescription+xml"/>
<link class="light-scheme" href="../../stylesheets/color_definitions_scheme_2_3_4eaabccdb423ebdd5fde62bb8c929b7912b0ba33.css_%3b%20filename_%3dUTF-8%27%27color_definitions_scheme_2_3_4eaabccdb423ebdd5fde62bb8c929b7912b0ba337939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="desktop_rtl" href="../../stylesheets/desktop_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27desktop_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="checklist_rtl" href="../../stylesheets/checklist_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27checklist_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="discourse-cakeday_rtl" href="../../stylesheets/discourse-cakeday_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27discourse-cakeday_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="discourse-calendar_rtl" href="../../stylesheets/discourse-calendar_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27discourse-calendar_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="discourse-details_rtl" href="../../stylesheets/discourse-details_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27discourse-details_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="discourse-lazy-videos_rtl" href="../../stylesheets/discourse-lazy-videos_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27discourse-lazy-videos_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="discourse-local-dates_rtl" href="../../stylesheets/discourse-local-dates_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27discourse-local-dates_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="discourse-math_rtl" href="../../stylesheets/discourse-math_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27discourse-math_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="discourse-narrative-bot_rtl" href="../../stylesheets/discourse-narrative-bot_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27discourse-narrative-bot_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="discourse-presence_rtl" href="../../stylesheets/discourse-presence_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27discourse-presence_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="discourse-solved_rtl" href="../../stylesheets/discourse-solved_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27discourse-solved_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="discourse-tooltips_rtl" href="../../stylesheets/discourse-tooltips_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27discourse-tooltips_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="docker_manager_rtl" href="../../stylesheets/docker_manager_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27docker_manager_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="poll_rtl" href="../../stylesheets/poll_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27poll_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="discourse-calendar_desktop_rtl" href="../../stylesheets/discourse-calendar_desktop_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27discourse-calendar_desktop_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="poll_desktop_rtl" href="../../stylesheets/poll_desktop_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce.css_%3b%20filename_%3dUTF-8%27%27poll_desktop_rtl_010e86cdc443c6a22fa77214fa3fc0bf2f3542ce7939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link data-target="desktop_theme" data-theme-id="3" data-theme-name="בהיר" href="../../stylesheets/desktop_theme_3_32d9a33a83c213d82cb6da72bd3eb36192a74400.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_32d9a33a83c213d82cb6da72bd3eb36192a744007939.css?__ws=forums.pythonic.guru" media="all" rel="stylesheet"/>
<link href="9042.rss" rel="alternate nofollow" title='הזנת RSS של ‚על סגנון, 79 תווים בשורה, טכניקות לפיצול שורה וכיו"ב’' type="application/rss+xml"/>
<meta content="פייתון בעברית ובחינם" property="og:site_name"/>
<meta content="website" property="og:type"/>
<meta content="summary" name="twitter:card"/>
<meta content="../../uploads/default/original/1X/49c4c7d93c7e73a9a15013cfae1d89084c9ba521.jpg" name="twitter:image"/>
<meta content="../../uploads/default/original/1X/49c4c7d93c7e73a9a15013cfae1d89084c9ba521.jpg" property="og:image"/>
<meta content="9042.html" property="og:url"/>
<meta content="9042.html" name="twitter:url"/>
<meta content='על סגנון, 79 תווים בשורה, טכניקות לפיצול שורה וכיו"ב' property="og:title"/>
<meta content='על סגנון, 79 תווים בשורה, טכניקות לפיצול שורה וכיו"ב' name="twitter:title"/>
<meta content='שלום וברוכים הבאים לפינת ה"דברים מוזרים שחלק מהמתכנתים המוזרים האלו מתייחסים אליהם באורח כמעט דתי".  אם אין לכם כוח לקרוא הכל, קראו את ההקדמה בקטנה וקפצו רק לסעיף 3.  והיום, רציתי לדבר על משהו שאני רואה בהרבה קומיטים ולא מעיר עליו כי הוא בעיקר עניין של סגנון.  ה־flake8 מציק לרובכם בגלל הגבלת התווים בשורה, וזה גורם לכם כאב ראש ועצבים.  יותר גרוע, זה גורם לכם לסגנן את הקוד בצורה שקצת מקשה על הקריאה שלו.  בפוסט הזה אני אדבר על:   למה יש הגבלה כזו בכלל? מה היתרונות שלה? האם היא קיימת בתעשייה? איך עו...' property="og:description"/>
<meta content='שלום וברוכים הבאים לפינת ה"דברים מוזרים שחלק מהמתכנתים המוזרים האלו מתייחסים אליהם באורח כמעט דתי".  אם אין לכם כוח לקרוא הכל, קראו את ההקדמה בקטנה וקפצו רק לסעיף 3.  והיום, רציתי לדבר על משהו שאני רואה בהרבה קומיטים ולא מעיר עליו כי הוא בעיקר עניין של סגנון.  ה־flake8 מציק לרובכם בגלל הגבלת התווים בשורה, וזה גורם לכם כאב ראש ועצבים.  יותר גרוע, זה גורם לכם לסגנן את הקוד בצורה שקצת מקשה על הקריאה שלו.  בפוסט הזה אני אדבר על:   למה יש הגבלה כזו בכלל? מה היתרונות שלה? האם היא קיימת בתעשייה? איך עו...' name="twitter:description"/>
<meta content="הקורס הפתוח" property="og:article:section"/>
<meta content="0088CC" property="og:article:section:color"/>
<meta content="שבוע 16" property="og:article:section"/>
<meta content="0088CC" property="og:article:section:color"/>
<meta content="העשרה" property="og:article:tag"/>
<meta content="סגנון-קוד" property="og:article:tag"/>
<meta name="twitter:label1" value="זמן קריאה"/>
<meta name="twitter:data1" value="2 mins 🕑"/>
<meta name="twitter:label2" value="לייקים"/>
<meta name="twitter:data2" value="16 ❤"/>
<meta content="2021-02-05T03:17:29+00:00" property="article:published_time"/>
<meta content="true" property="og:ignore_canonical"/>
<script type="application/ld+json">{"@context":"http://schema.org","@type":"QAPage","name":"על סגנון, 79 תווים בשורה, טכניקות לפיצול שורה וכיו\"ב","mainEntity":{"@type":"Question","name":"על סגנון, 79 תווים בשורה, טכניקות לפיצול שורה וכיו\"ב","text":"שלום וברוכים הבאים לפינת ה&quot;דברים מוזרים שחלק מהמתכנתים המוזרים האלו מתייחסים אליהם באורח כמעט דתי&quot;.\n\nאם אין לכם כוח לקרוא הכל, קראו את ההקדמה בקטנה וקפצו רק לסעיף 3.\n\nוהיום, רציתי לדבר על משהו שאני רואה בהרבה קומיטים ולא מעיר עליו כי הוא בעיקר עניין של סגנון.\n\nה־flake8 מציק לרובכם בגלל הגבלת התווים &hellip;","upvoteCount":16,"answerCount":0,"dateCreated":"2021-02-05T03:17:28.927Z","author":{"@type":"Person","name":"ים מסיקה"}}}</script>
</head>
<body class="">
<header class="d-header">

<div class="wrap content">
<div class="title">
<a data-auto-route="true" href="/index.html">
<img alt="פייתון בעברית ובחינם" class="logo-big" id="site-logo" src="/uploads/default/original/1X/3c7e2ccc77e214fb4e38daa421f1b8878a5677f9.jpg"/>
</a>
<div class="before-header-panel-outlet"></div>
<div class="panel" role="navigation">
<span class="header-buttons"></span>
<ul class="icons d-header-icons">
<!-- More to come? -->
</ul>
</div>
</div>
</div></header>
<div class="wrap" id="main-outlet" role="main">
<div id="topic-title">
<h1>
<a href="9042.html">על סגנון, 79 תווים בשורה, טכניקות לפיצול שורה וכיו"ב</a>
</h1>
<div class="topic-category" itemscope="" itemtype="http://schema.org/BreadcrumbList">
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/old/20.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #0088CC"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">הקורס הפתוח</span>
</span>
</a>
<meta content="1" itemprop="position"/>
</span>
<span itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
<a class="badge-wrapper bullet" href="../../c/old/week-16/28.html" itemprop="item">
<span class="badge-category-bg" style="background-color: #0088CC"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">שבוע 16</span>
</span>
</a>
<meta content="2" itemprop="position"/>
</span>
</div>
<div class="topic-category">
<div class="discourse-tags list-tags"><span class="tags-string">תגיות: </span>
<a class="discourse-tag" href="../../tag/%d7%94%d7%a2%d7%a9%d7%a8%d7%94.html" rel="tag">העשרה</a>, 
            <a class="discourse-tag" href="../../tag/%d7%a1%d7%92%d7%a0%d7%95%d7%9f-%d7%a7%d7%95%d7%93.html" rel="tag">סגנון-קוד</a>
</div>
</div>
</div>
<div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
<meta content='על סגנון, 79 תווים בשורה, טכניקות לפיצול שורה וכיו"ב' itemprop="headline"/>
<meta content="שבוע 16" itemprop="articleSection"/>
<meta content="העשרה, סגנון-קוד" itemprop="keywords"/>
<div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
<meta content="פייתון בעברית ובחינם" itemprop="name"/>
<div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject">
<meta content="../../uploads/default/original/1X/3c7e2ccc77e214fb4e38daa421f1b8878a5677f9.jpg" itemprop="url"/>
</div>
</div>
<div class="topic-body crawler-post" id="post_1">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<span itemprop="name">Yam</span>
</span>
<link href="9042.html" itemprop="mainEntityOfPage"/>
<span class="crawler-post-infos">
<time class="post-time" datetime="2021-02-05T03:17:29Z" itemprop="datePublished">
                     5 בפברואר,‏ 2021,‏  3:17am
                  </time>
<meta content="2023-01-09T01:03:20Z" itemprop="dateModified"/>
</span>
</div>
<div class="post" itemprop="articleBody">
<p>שלום וברוכים הבאים לפינת ה"דברים מוזרים שחלק מהמתכנתים המוזרים האלו מתייחסים אליהם באורח כמעט דתי".<br/>
<strong>אם אין לכם כוח לקרוא הכל, קראו את ההקדמה בקטנה וקפצו רק לסעיף 3.</strong></p>
<p>והיום, רציתי לדבר על משהו שאני רואה בהרבה קומיטים ולא מעיר עליו כי הוא בעיקר עניין של סגנון.<br/>
ה־flake8 מציק לרובכם בגלל הגבלת התווים בשורה, וזה גורם לכם כאב ראש ועצבים.<br/>
יותר גרוע, זה גורם לכם לסגנן את הקוד בצורה שקצת מקשה על הקריאה שלו.</p>
<p>בפוסט הזה אני אדבר על:</p>
<ol>
<li>למה יש הגבלה כזו בכלל? מה היתרונות שלה?</li>
<li>האם היא קיימת בתעשייה?</li>
<li>איך עושים את זה נכון?</li>
<li>האם אין משהו שפותר את זה אוטומטית?</li>
<li>האם אני אתחיל לאכוף את זה בקומיטים שנשלחים?</li>
</ol>
<p>נפתח בכמה מילים על…</p>
<h2>
<a class="anchor" href="#h-1" name="h-1"></a>למה ההגבלה הזו קיימת?</h2>
<h3>
<a class="anchor" href="#h-2" name="h-2"></a>היסטוריה</h3>
<p>כמו כל דבר, הסיפור שלנו לגבי ההגבלה הזו מתחיל בקצת היסטוריה.<br/>
בעבר, דרך מסוימת לשמור נתונים ממוחשבים בצורה פיזית הייתה בעזרת <a href="https://en.wikipedia.org/wiki/Punched_card">כרטיסים מנוקבים</a>.<br/>
בין הכרטיסים הפופולריים ביותר היו אלו של IBM, שהכילו 12 שורות שבכל אחת מהן 80 “תאים”, כל תא מייצג ביט.<br/>
אם “תא” בטבלה הזו (למעשה מקום פיזי על הכרטיס) נוקב, ערכו היה 1, אחרת ערכו היה 0.<br/>
על אותם כרטיסים היו שומרים פעמים רבות גם תוכניות מחשב שרצו להריץ.</p>
<p>לכרטיסים המנוקבים השפעות תרבותיות רבות.<br/>
רוחב ברירת המחדל של הטרמינל שלכם (cmd) הוא 80 תווים, ו־PEP8, לדוגמה, ממליץ על עד 79 תווים בשורה אלא אם יש הסכמה רחבה בקרב כותבי הפרויקט על להעלות את המגבלה לעד 100 תווים.</p>
<p>אוקיי. אז סיבה היסטורית יש. אבל…<br/>
אנחנו לא דינוזאורים ולא מקבלים החלטות כ"כ חשובות שמשפיעות על הקוד שלנו נטו בגלל התרפקות על העבר.<br/>
איפה ההיגיון?</p>
<h3>
<a class="anchor" href="#h-3" name="h-3"></a>פרקטיקה</h3>
<p>הנה כמה סיבות שנהוג לציין בעד ההגבלה של X תווים בשורה:</p>
<ol>
<li>קוד של 79 תווים בשורה נכנס בכל מסך ובכל חלון – בטרמינלים, בטבלטים ואפילו במסך של טלפון בתצוגה אופקית.</li>
<li>בסביבת עבודה, קוד של 79 תווים מאפשר לראות diff (שתי עמודות של קוד) בקלות, בלי שהקוד “גולש” ו"נשבר" לשורות הבאות. במסכים גדולים זה האורך היחיד שיאפשר עבודה נוחה במצבי ‏<a href="https://stackoverflow.com/questions/572237/whats-the-best-three-way-merge-tool">3 way merge</a>.</li>
<li>העמסת פעולות רבות בשורה מעמיסה קוגנטיבית על הקורא. פיצול לשורות קצרות מכריחה את המתכנת לא להכניס יותר מדי לוגיקה לשורה אחת.</li>
<li>זה נכון גם לגבי הזחות – קוד מוזח מדי “מבזבז” תווים בשורה, כך שהגבלת תווים מעודדת מתכנתים לא להזיח את הקוד יותר מדי, ומכריחה אותם לפצל לוגיקה מורכבת לפונקציות נפרדות.</li>
<li>נרצה לאפשר לקוראי הקוד לסרוק אותו במהירות. שורות ארוכות מדי יגרמו לעיניים לזוז הרבה ימינה ושמאלה.</li>
</ol>
<p>הסיבות פה מנוסחות עבור 79 תווים בשורה – אבל תופסות פחות או יותר גם עבור הגבלות דומות (100, נניח).</p>
<h2>
<a class="anchor" href="#h-4" name="h-4"></a>האם השטות הזו קיימת בתעשייה?</h2>
<p>כמובן, כמו כל דבר בתעשיית המפתחים, סביב הדבר הזה קיים <a href="https://stackoverflow.com/questions/110928/is-there-a-valid-reason-for-enforcing-a-maximum-width-of-80-characters-in-a-code">ויכוח כמעט דתי</a>, שלפעמים יוצר לשרשורים <a href="https://news.ycombinator.com/item?id=5436993">ארוכים ומתישים</a>.<br/>
המתנגדים (ביניהם <a href="https://www.theregister.com/2020/06/01/linux_5_7/#:~:text=Linux%20kernel%20overlord%20Linus%20Torvalds,the%20topic%20of%20line%20lengths.">לינוס טורבלס</a>, המפתח החלוץ של מערכת ההפעלה לינוקס), טוענים שאין סיבה להגבלה של 80 תווים ושהיא מגבילה וגורמת לבעיות בחיים האמיתיים, כמו חיפוש בקוד.<br/>
רוב המתכנתים (כולל לינוס, נניח) כן מסכימים על כך שצריכה להיות הגבלה עקרונית מסוימת, והקונצנזוס נמצא אי שם בין 80 ל־100 תווים. חלק מהמפתחים מחזיקים בדעה שמדובר בכלל אצבע שמותר להפר כל עוד זה משרת מטרה מסוימת.</p>
<p>כשתגיעו למקום העבודה שלכם, לרוב יהיו כללים קיימים בנוגע לאורכי השורות המקסימליים, ואתם תתבקשו לעקוב אחר ההסכמה.<br/>
באופן כללי, המלצתי אליכם היא להתרחק מוויכוחים דתיים שכאלו.<br/>
אף אחד לא יוצא צודק או מרווח והדעות של כולם לגיטימיות אבל לא עד כדי כך חשובות <img alt=":slight_smile:" class="emoji" height="20" loading="lazy" src="../../images/emoji/twitter/slight_smilee5bf.png?v=12" title=":slight_smile:" width="20"/></p>
<h2>
<a class="anchor" href="#h-5" name="h-5"></a>איך עושים את זה נכון?</h2>
<p>כמובן שמדובר פה בעניין של סגנון, אבל אני הולך להציע את משנתי.</p>
<h3>
<a class="anchor" href="#h-1-6" name="h-1-6"></a>דרך 1: השמה למשתנים.</h3>
<p>נדמיין את השורה הבאה:</p>
<pre><code class="lang-python">wav_lowered_filenames = [file.lower() for file in pathlib.Path(SOUND_DIRECTORY).glob('**/*.wav')]
</code></pre>
<p>בקלות אפשר לפצל למשהו כזה:</p>
<pre><code class="lang-python">wav_files = pathlib.Path(SOUND_DIRECTORY).glob('**/*.wav')
wav_lowered_filenames = [file.lower() for file in wav_files]
</code></pre>
<p>הרבה יותר קריא, ונכנס אחלה ב־80 תווים בשורה.<br/>
זכרו שמותר לעשות את אותו דבר גם עם תנאים:</p>
<pre><code class="lang-python">return select(Users.id, User.name).from(Users).where(Users.role == UserRoles.Administrator)
</code></pre>
<p>יכול להיכתב כ:</p>
<pre><code class="lang-python">is_admin = Users.role == UserRoles.Administrator
return select(Users.id, User.name).from(Users).where(is_admin)
</code></pre>
<h3>
<a class="anchor" href="#h-2-unpacking-7" name="h-2-unpacking-7"></a>דרך 2: Unpacking.</h3>
<p>הרבה פעמים Unpacking יכול גם לקצר לנו את הקוד, וגם להפוך אותו לקריא יותר.<br/>
חשוב לא להשתמש ב־Unpacking כאשר הוא מסבך את הקוד, אבל לפעמים זה נראה מדהים:</p>
<p>במקום:</p>
<pre><code class>is_admin = Users.role == UserRoles.Administrator
return select(User.id, User.name, User.address, User.email).from(Users).where(is_admin)
</code></pre>
<p>נעדיף לכתוב:</p>
<pre><code class>user_shipping_details = (User.id, User.name, User.address, User.email)
is_admin = Users.role == UserRoles.Administrator
return select(*user_shipping_details).from(Users).where(is_admin)
</code></pre>
<p>גם אנחנו מבינים טוב יותר למה דווקא השדות האלו נבחרו (אלו השדות שחשובים לצורך משלוח של משהו למשתמש), וגם קיצרנו את השורה והפכנו אותה לקריאה יותר.</p>
<p>אפשר להשתמש ב־Unpacking גם כדי לחסוך קריאה לא נעימה לפונקציה מרובת פרמטרים, אם יש לנו את הנתונים במילון.<br/>
תוכלו לראות דוגמה פשוטה לזה ב־<a href="https://github.com/PythonFreeCourse/lms/blob/master/lms/lmsweb/views.py#L103">lms</a> או דוגמה מורכבת יותר <a href="https://github.com/yammesicka/advent/blob/master/2020/2/pretty.py">בפתרון שלי ל־Advent of Code יום 2</a>.</p>
<h3>
<a class="anchor" href="#h-3-8" name="h-3-8"></a>דרך 3: פיצול שורה בכוח.</h3>
<p>לפעמים אנחנו לא מעוניינים או לא יכולים לבצע השמות – בין אם מחשש לפגיעה בקריאות הקוד, או במקרים אחרים בהם הפיצול להשמה לא מספיק.<br/>
דרך טובה להתגבר על הבעיה הזו היא לשבור שורה אחת להרבה שורות.</p>
<p>אחת הצורות המוכרות והפחות מומלצות היא לעשות את זה באמצעות התו <code>\</code>. PEP8 <a href="https://www.python.org/dev/peps/pep-0008/#:~:text=The%20preferred%20way%20of%20wrapping%20long%20lines">פחות מתחבר</a> לשיטה הזו.</p>
<p>הצורה הפופולרית והמומלצת היא לפצל את השורה באמצעות סוגריים.<br/>
לדוגמה:</p>
<pre><code class="lang-python">return get_all_directory_names(MAIN_DIRECTORY).get_files().to_lowercase().read()
</code></pre>
<p>יהפוך ל־</p>
<pre><code class="lang-python">return (
    get_all_directory_names(MAIN_DIRECTORY)
   .get_files()
   .to_lowercase()
   .read()
)
</code></pre>
<p>במקרה הזה, גם השמה למשתנים הייתה עובדת. אבל בואו ניקח דוגמה לפונקציה פחות נעימה:</p>
<pre><code class="lang-python">def get_files_in_directory(dir_name: str, is_recursive: bool) -&gt; Iterable[str]:
</code></pre>
<p>במקרה הזה, אפשר לפצל בצורה הבאה:</p>
<pre><code class="lang-python">def get_files_in_directory(
    dir_name: str, is_recursive: bool,
) -&gt; Iterable[str]:
</code></pre>
<p>אפשר להשתמש באותו טריק גם <a href="https://github.com/PythonFreeCourse/lms/blob/master/lms/lmsweb/views.py#L15">עם import־ים</a> שצריכים פיצול, או <a href="https://github.com/PythonFreeCourse/lms/blob/master/lms/models/solutions.py#L116">במבני נתונים</a> (מילון, רשימה, tuple) עם הרבה נתונים שצריכים פיצול.</p>
<h3>
<a class="anchor" href="#h-9" name="h-9"></a>טיפ: איך מפצלים עם סוגריים ככה שהקוד לא יראה צ’יקמוק</h3>
<p>דבר ראשון – אם זו רשימה של דברים, תמיד ודאו ש<a href="5612/4.html">גם השורה האחרונה מסתיימת בפסיק</a>.<br/>
פירטתי למה בקישור, אבל בגדול זה עוזר לאנשים שבאים לאחריכם להשתלב בקוד בלי להוסיף באגים ומשאיר את השורה על שמכם ב־git כשמישהו יוסיף קוד.</p>
<p>אני מקפיד שלא להשאיר את השורה הסוגרת “תלויה באוויר”, בעיניי זה נראה מכוער. כמובן שזה עניין של טעם.<br/>
כלומר, לעולם לא כך:</p>
<pre><code class="lang-python">def get_files_in_directory(
    dir_name: str, is_recursive: bool) -&gt; Iterable[str]:
</code></pre>
<p>וכן כך:</p>
<pre><code class="lang-python">def get_files_in_directory(
    dir_name: str, is_recursive: bool,
) -&gt; Iterable[str]:
</code></pre>
<p>או כך:</p>
<pre><code class="lang-python">def get_files_in_directory(
    dir_name: str,
    is_recursive: bool,
) -&gt; Iterable[str]:
</code></pre>
<p>כמובן שעדיף להימנע מרשימות ממש ארוכות שמפוצלות ככה ויוצרות מפלצת של 10 שורות.<br/>
אם יש 5 שורות שכתובות ככה אתם אמורים לחשוד שמשהו היה אמור להיות מפוצל בדרך אלגנטית יותר.</p>
<h2>
<a class="anchor" href="#h-10" name="h-10"></a>האם אין משהו שפותר את זה אוטומטית?</h2>
<p>תלוי עד כמה אתם נוראיים, בלתי נסבלים ופדנטיים בהקשרי אורך השורות שלכם.<br/>
אם אתם נוראיים כמוני אז למרבה הצער כיום אין פתרון שעושה את זה בצורה שנראית טוב.</p>
<p>לשימושם של אנשים שכן בריאים בנפשם, יש מודול בשם <a href="https://github.com/psf/black">black</a> שעושה את זה בצורה סבירה למדי.</p>
<p>חשוב לי להדגיש שוב: <strong>אל</strong> תעירו לאנשים אחרים על דברים סגנוניים אם זה לא ב־guideline של הפרויקט.<br/>
שתי סיבות:</p>
<ol>
<li>הזמן שלכם יקר, ומה שלא דאגו לו שייעשה בצורה מספיק אוטומטית – כנראה לא מספיק חשוב.</li>
<li>זו דרך מצוינת לזה שכולם יישנאו אתכם ולפתוח מלחמות דת. זה מביא חורבן, סבל, כאוס ומאגיה שחורה.</li>
</ol>
<h2>
<a class="anchor" href="#h-11" name="h-11"></a>האם אני אתחיל לאכוף את זה בקומיטים שנשלחים?</h2>
<p>לא.</p>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/LikeAction" itemprop="interactionType"/>
<meta content="16" itemprop="userInteractionCount"/>
<span class="post-likes">16 לייקים</span>
</div>
<div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
<meta content="http://schema.org/CommentAction" itemprop="interactionType"/>
<meta content="0" itemprop="userInteractionCount"/>
</div>
</div>
</div>
</div>
<footer class="container wrap">
</footer>
<span class_="highlight-scripts"><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css" rel="stylesheet"/><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/go.min.js"></script></span><span class_="highlight-scripts"><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css" rel="stylesheet"/><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/go.min.js"></script><script>hljs.highlightAll();</script></span></body>
<!-- Mirrored from forums.pythonic.guru/t/topic/9042 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 17 Sep 2023 02:01:27 GMT -->
</html>
